# OSI 体系结构

## 应用层

## 表示层

## 会话层

## 传输层

传输层（Transport Layer）是OSI模型的第四层，**为应用进程提供端到端的服务**。

### 1. 协议

传输层最知名的协议就是**UDP**和**TCP**。

通常我们说这两个协议的时候，都会说，UDP面向无连接，TCP面向连接，那何谓连接呢？

> 所谓的建立连接，是为了在客户端和服务端维护连接，而建立一定的数据结构维护双方交互的状态，用这样的数据结构维护双方交互的状态

#### # UDP

UDP（User Datagram Protocal）称为用户数据包协议，是一个简单的面向数据报的协议。

##### ## 报文结构

![UDP报文结构](https://teaof-konwleadge-1255982134.cos.ap-shanghai.myqcloud.com/blog/%E7%BD%91%E7%BB%9C/OSI/UDP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.jpg)

##### ## 特点

UDP的特点：

- 无连接：不管对方有没有收到
- 不安全：可以给任何人传输数据，任何人也可以给它发送数据
- 不会根据网络状态更改状态

##### ## 场景

1. 需求资源少，容忍少数丢包
2. 无需一对一沟通，可广播
3. 处理速度快，延迟低

#### # TCP

TCP（Transmission Control Protocol）称为**传输控制协议**，是一种面向连接的、可靠的、基于字节流的传输层通信协议。

##### ## 报文结构

![TCP报文结构](https://teaof-konwleadge-1255982134.cos.ap-shanghai.myqcloud.com/blog/%E7%BD%91%E7%BB%9C/OSI/TCP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.jpg)

- 序号：实现报文的有序控制
- 确认序号：确认当前收到数据
- 状态码的解释

##### ## 特点

- 可靠：
- 

##### ## 重点过程

三次握手

四次挥手

流量控制

拥塞控制

### 2. 使用

#### # Socket

Socket又名套接字，基于TCP和UDP通信协议。

##### ## 基本方法

| 名称    | 意义 |
| ------- | ---- |
| bind    |      |
|         |      |
| connect |      |

##### ## 分类

基于TCP协议

基于UDP协议

## 网络层

网络层（Network Layer）是OSI模型的第三层，提供路由与寻址的功能，使两端系统能够互连并决定最终路径，并具有一定的拥塞控制和流量控制的能够力。

### 1. 存在意义

- 提供路由与寻址
- 寻找最佳路径
- 拥塞控制和流量控制

### 2. 协议

#### # ICMP

ICMP全程**Internet Control Message Protocal**，也就是**互联网报文控制协议**。

ICMP主要的使用方式有两种：

- 查询报文类型：常见的**Ping**就是主动请求并获取主动应答的ICMP协议。
- 差错报文类型：故意发送一些错误的包，从而获取路由中的一些信息，比如到最近一跳所需花的时间，贷款。常见的如**Traceroute**。



### 3. 设备

#### # 网关

网关往往是一个路由器，是一个三层转发设备，一般是某一个网段的第一和或者第二个。

#### # 路由器

路由器是一个三层设备，它里面通常有多张网卡，里面有如何寻找下一跳的规则。**经过路由器之后的MAC头会变，IP地址可变可不变，变的情况就是NAT**。





## 数据链路层

数据链路层，也称**MAC（Mudium Access Control）**,即**媒体访问控制**。

### 1. 存在意义

该层能够解决的问题：

- 定制发送规则：**随机接入协议**
- 发送双方的确定：利用**MAC头**确定接送双方

- 错误检测：第二层的后面是最后是**CRC**，用来进行循环冗余检测

### 2. 相关协议

#### # ARP协议

ARP协议是通过解析**网络层地址**获取**数据链路层地址**的网络传输协议。

#### # RARP

RARP协议是通过解析**数据链路层地址**获取**网络层地址**的网络传输协议。

#### # STP

STP协议可以解决交换机中的环路问题，将由环路的图变成没有环路的树。

 ### 3. 相关设备

#### # 交换机

它有一个**转发表**可以记下哪个口对应的MAC地址设备。所以交换机是有学习能力，经过第一次转发以后，它就会记录某个口对应的MAC地址。

交换机数目过多的时候，我们可以使用**物理隔离**或者使用**虚拟隔离**，也就是我们平时所说的**VLAN（虚拟局域网）**。



## 物理层

物理信号的接收和发送，比如线路、无线电、光纤等等

有一种设备叫做**集线器（Hub）**，它工作在物理层，负责将信号广播到附近的设备